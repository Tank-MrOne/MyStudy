(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-559c206c"],{"5c03":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAdd}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{margin:"20px 0"},attrs:{data:e.trademarks,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tmName",label:"品牌名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"品牌LOGO"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"60px"},attrs:{src:e.row.logoUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;t.$index;return[a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.showUpdate(r)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.remove(r)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.page,"page-sizes":[3,6,9],"page-size":e.limit,total:e.total,layout:"prev, pager, next, jumper, ->, sizes, total"},on:{"current-change":e.getTrademarks,"size-change":e.handleSizeChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.id?"修改品牌":"添加品牌",visible:e.isShowDialog},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("el-form",{ref:"ruleForm",staticStyle:{width:"80%"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"品牌名称","label-width":"100px",prop:"tmName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.tmName,callback:function(t){e.$set(e.form,"tmName",t)},expression:"form.tmName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌LOGO","label-width":"100px",prop:"logoUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$BASE_API+"/admin/product/fileUpload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.logoUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.logoUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过50kb")])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShowDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdate}},[e._v("确 定")])],1)],1)],1)},i=[],n=a("db72"),s=(a("96cf"),a("3b8d")),o={name:"Trademark",data:function(){return{trademarks:[],total:0,page:1,limit:3,isShowDialog:!1,form:{tmName:"",logoUrl:""},loading:!1,rules:{tmName:[{required:!0,message:"请输入名称"},{validator:this.validateTmName,trigger:"blur"}],logoUrl:[{required:!0,message:"LOGO必须指定"}]}}},mounted:function(){this.getTrademarks()},methods:{validateTmName:function(e,t,a){t.length<2||t.length>10?a("长度必须在2-10个之间2"):a()},remove:function(e){var t=this;this.$confirm("确定删除 ".concat(e.tmName," 吗?"),"提示",{type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$API.trademark.remove(e.id);case 2:r=a.sent,200===r.code?(t.$message({type:"success",message:"删除成功!"}),t.getTrademarks(1===t.trademarks.length&&t.page>1?t.page-1:t.page)):t.$message({type:"error",message:"删除失败"});case 4:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addOrUpdate:function(){var e=this;this.$refs["ruleForm"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}if(r=e.form,!r.id){t.next=8;break}return t.next=5,e.$API.trademark.update(r);case 5:i=t.sent,t.next=11;break;case 8:return t.next=10,e.$API.trademark.add(r);case 10:i=t.sent;case 11:200===i.code?(e.$message.success("".concat(r.id?"更新":"添加","成功!")),e.isShowDialog=!1,e.getTrademarks(r.id?e.page:1)):e.$message.success("".concat(r.id?"更新":"添加","失败!")),t.next=15;break;case 14:console.log("校验不通过");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleAvatarSuccess:function(e,t){this.form.logoUrl=e.data},beforeAvatarUpload:function(e){var t=["image/jpeg","image/png"].indexOf(e.type)>=0,a=e.size/1024<50;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 50K!"),t&&a},showUpdate:function(e){this.form=Object(n["a"])({},e),this.isShowDialog=!0},showAdd:function(){var e=this;this.form={tmName:"",logoUrl:""},this.isShowDialog=!0,this.$nextTick((function(){e.$refs.ruleForm.clearValidate()}))},handleSizeChange:function(e){this.limit=e,this.getTrademarks(1)},getTrademarks:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,this.page=t,this.loading=!0,e.next=5,this.$API.trademark.getList(t,this.limit);case 5:a=e.sent,this.loading=!1,200===a.code?(r=a.data,i=r.records,n=r.total,this.trademarks=i,this.total=n):this.$message.error("获取分页列表失败");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},l=o,c=(a("6809"),a("2877")),u=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=u.exports},6809:function(e,t,a){"use strict";var r=a("9877"),i=a.n(r);i.a},9877:function(e,t,a){}}]);