<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		
		<script type="text/javascript">
			
			function fn(){
				var a = 0;
				function fn1(){
					a++;
					console.log(a);
				}
				return fn1;
			}
			
			var f =  fn();//fn调用时候的执行上下文和这次调用定义的函数也就是f，形成了独立的闭包机制
			f();//1
			f();//2
			f = null;//释放闭包
			
			var f1 = fn();
			f1();//1
			f1();//2
			f1 = null;
			
			var f2 = fn();
			f2();
			f2();
			f2 = null;
			
		
			//是什么（产生闭包的条件   理解）
			//作用
			//1、延长外部函数变量对象的生命周期
			//2、让函数外部可以操作(读写)到函数内部的数据(变量/函数)
			//优缺点
			//内存泄漏和内存溢出
			//内存泄漏就是内存释放不了
			//内存溢出就是内存炸了
			//解决：
			//闭包会造成很严重的内存溢出，厉害了会出现内存泄漏，
			//所以闭包不许滥用，如果要用闭包，使用完成记得把闭包清除
			//要想清除闭包  就是让定义的内部函数，释放掉
			
			
		
		
		
		
		
		
		
			
			function add(){
				var a = 0;
				a++;
				console.log(a);
			}
			
			add();//1
			add();//1
			//函数数据是同一份，但是函数在调用的时候，每次调用执行上下文是不同的，都是一个新的执行上下文
			//函数内部要重新去执行一遍
			
			
			
			
			
			
			
			
		</script>
	</body>
</html>
